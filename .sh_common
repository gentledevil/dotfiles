# umask, different if root
[ $UID != 0 ] && umask 027 || umask 022

### Environment ###

# mail
export EMAIL="jonathan.lestrelin@gmail.com"
export MAILPATH=/var/spool/mail/$USER:$HOME/Mail
export DEBFULLNAME="Jonathan Lestrelin"
export DEBEMAIL="$EMAIL"

export EDITOR=vim
export PAGER=less
export SYSTEMD_PAGER=cat
export GIT_PAGER=cat
export BROWSER=firefox

# less
export LESS=-wR

### Aliases ###

alias ll="ls -lh"
alias l="ll"
alias l.="ls -d .*"
alias la="ls -lA"
alias lx="ls -lAxb"          # sort by extension
alias lk="ls -lASr"          # sort by size, biggest last
alias lt="ls -lAtr"          # sort by date, most recent last
alias lsb="ls -ail"
alias sl="ls"
alias cta="cat"
alias df="df -h"
alias rm="rm -i"
alias cp="cp -i"
alias mv="mv -i"
alias g='egrep -i'
alias open="xdg-open"
alias trash="gvfs-trash"
alias search="tracker-search"
alias em="emacs -nw"
alias vi="vim"

### Functions ###

cl() {
	cd "$1" && ls
}

mcd() {
	mkdir -p "$1" && cd "$1"
}

h() {
	test -z $1 && history || history | egrep -i $1
}


### ssh-agent ###
SSHAGENT=/usr/bin/ssh-agent
SSHAGENTARGS="-s"
if [ -z "$SSH_AUTH_SOCK" -a -x "$SSHAGENT" ]; then
	eval `$SSHAGENT $SSHAGENTARGS` >/dev/null
	trap "kill $SSH_AGENT_PID" 0
fi

### Display ###

# color
if [ ! -z $COLORTERM ]
then
	# 256 colors in terminal
	TERM=xterm-256color
fi
export CLICOLOR=true
# GNU ls colors (assume dircolors means GNU ls)
if which dircolors &>/dev/null; then
	eval $(dircolors ~/.dircolors)
	alias ls="ls --color=auto --group-directories-first"
fi
if which colordiff &>/dev/null; then
	alias diff=colordiff
fi
if [ -f "/usr/lib/libstderred.so" ]; then
	export LD_PRELOAD="/usr/lib/libstderred.so"
fi
alias grep="grep --color=auto"
alias egrep="egrep --color=auto"
alias fgrep="fgrep --color=auto"
alias tree="tree -C"
export LESS_TERMCAP_mb=$'\E[01;31m'       # begin blinking
export LESS_TERMCAP_md=$'\E[01;38;5;33m'  # begin bold
export LESS_TERMCAP_me=$'\E[0m'           # end mode
export LESS_TERMCAP_se=$'\E[0m'           # end standout-mode
export LESS_TERMCAP_so=$'\E[01;31;5;31m'  # begin standout-mode - info box
export LESS_TERMCAP_ue=$'\E[0m'           # end underline
export LESS_TERMCAP_us=$'\E[38;5;31m'     # begin underline

### Source host specific definitions ###
if [ -f ~/.sh_local ]; then
	source ~/.sh_local
fi
